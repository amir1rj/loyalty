<!-- point_role_groups.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Point Role Groups</title>
</head>
<body>
<h1>Point Role Groups</h1>
<form method="post">
    {% csrf_token %}
    {% for group in groups %}
        <h2>{{ group.name }}</h2>
        <div>
            {% for role, form in role_forms %}
                {% if role.group == group %}
                    <fieldset>
                        <legend>Editing Role: {{ role }}</legend>
                        <p>ID: {{ form.id.value }}</p>

                        <!-- Render all fields except the reward field -->
                        {% for field in form %}
                            {% if field.name != 'reward' %}
                                {{ field.label_tag }}{{ field }}
                                {% if field.errors %}
                                    <div class="error">{{ field.errors }}</div>
                                {% endif %}
                            {% endif %}
                        {% endfor %}

                        <!-- Render reward field manually -->
                        <label for="reward_{{ role.id }}">Rewards:</label>
                        <select name="reward_{{ role.id }}" id="reward_{{ role.id }}" multiple>
                            {% for reward in form.fields.reward.queryset %}
                                <option value="{{ reward.id }}" {% if reward in role.reward.all %}selected{% endif %}>
                                    {{ reward.name }}
                                </option>
                            {% endfor %}
                        </select>

                        <button type="submit"
                                onclick="return confirm('Are you sure you want to delete this point role?');"><a
                                href="{% url 'delete_point_role' role.id %}">delete </a>
                        </button>

                    </fieldset>
                {% endif %}
            {% endfor %}
        </div>
    {% endfor %}
    <button type="submit">Save Changes</button>
</form>

</body>
</html>
